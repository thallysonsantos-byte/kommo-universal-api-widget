{
  "widget": {
    "name": "API Request Widget",
    "description": "Widget para o Kommo Salesbot que realiza chamadas HTTP e aceita variáveis dinâmicas.",
    "version": "1.1.0",
    "author": "Thallyson Santos",
    "base_url": "https://kommo-universal-api-widget.onrender.com/",
    "install_url": "https://kommo-universal-api-widget.onrender.com/install",
    "icon": "https://kommo-universal-api-widget.onrender.com/assets/icon.png",
    "locations": ["salesbot_designer"],
    "support": {
      "url": "https://seusite.com/suporte"
    }
  },
  "settings": {
    "salesbot_designer": {
      "title": "API Request Block",
      "fields": [
        {
          "name": "api_url",
          "type": "text",
          "label": "URL da API",
          "required": true
        },
        {
          "name": "method",
          "type": "select",
          "label": "Método HTTP",
          "options": [
            { "label": "GET", "value": "GET" },
            { "label": "POST", "value": "POST" },
            { "label": "PUT", "value": "PUT" },
            { "label": "DELETE", "value": "DELETE" }
          ],
          "default": "GET"
        },
        {
          "name": "body",
          "type": "text",
          "label": "Corpo da requisição (JSON com variáveis do bot)",
          "placeholder": "{\"lead_id\": \"{{lead.id}}\", \"name\": \"{{contact.name}}\"}"
        }
      ],
      "exits": [
        { "name": "success", "label": "Sucesso" },
        { "name": "error", "label": "Erro" }
      ]
    }
  }
}
